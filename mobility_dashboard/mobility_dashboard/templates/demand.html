<!-- <html>
    <head>
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <link href='https://api.tiles.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
        <script src='https://api.tiles.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <style>
            body { margin:0; padding:0; }
            #map { width: 70%; height: 700px; }
        </style>
    </head>
    <body>
        <div id="map"></div>
    </body>
</html> -->


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="static/favicon.ico">

    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <title>Mobility Dashboard - Demand</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/dashboard/">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <!-- Bootstrap core CSS -->
    <!-- <link href="static/css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <link href="/static/css/dashboard.css" rel="stylesheet">
    <style>
        #map { width: 100%; height: 700px; }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <a class="navbar-brand" href="#">Mobility Dashboard</a>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" href="#">Disabled</a>
          </li>
        </ul>
        <form class="form-inline mt-2 mt-md-0">
          <input class="form-control mr-sm-2" type="text" placeholder="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <nav class="col-sm-3 col-md-2 hidden-xs-down bg-faded sidebar">
          <ul class="nav nav-pills flex-column">
            <li class="nav-item">
              <a class="nav-link" href="/">Routing</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/demand/">Demand <span class="sr-only">(current)</span></a>
            </li>
          </ul>
          </ul>
        </nav>

        <main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3">
          <h1>Demands</h1>
          <h2>Heatmap</h2>
          <div id="map"></div>
          <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoiY3l5b3VkeSIsImEiOiJjajhneDloMXUwbTJtMnhwYnFkanpmYXk3In0.1WSgP_udkTR_YS8oXyd9Tw';
            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/dark-v9',
                center: [-83.7430,42.2808],
                zoom: 11
            });

            // var geojson = JSON.parse('{{ demand_data }}')
            var geojson = {"type": "FeatureCollection", "crs": {"type": "name", "properties": {"name": "Ann Arbor Demands"}}, "features": [{"type": "Feature", "properties": {"id": "261614034003", "mag": 2.3, "time": 1507425650893, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.771405559235", "42.28656356539839", 0.0]}}, {"type": "Feature", "properties": {"id": "261614005002", "mag": 1.7, "time": 1507425289659, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.74662298349304", "42.2746572111932", 105.5]}}, {"type": "Feature", "properties": {"id": "261614054002", "mag": 1.6, "time": 1507424832518, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69550449371603", "42.24736841843113", 0.0]}}, {"type": "Feature", "properties": {"id": "261614041003", "mag": 1.42, "time": 1507423898710, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.77060780663983", "42.27022216658186", 7.64]}}, {"type": "Feature", "properties": {"id": "261614043001", "mag": 4.2, "time": 1507422626990, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.77490618251957", "42.26439677800723", 46.41]}}, {"type": "Feature", "properties": {"id": "261614035002", "mag": 1.6, "time": 1507422449194, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.77223853662963", "42.27816215175062", 0.0]}}, {"type": "Feature", "properties": {"id": "261614032003", "mag": 4.6, "time": 1507420784440, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.77281891786429", "42.29600092323342", 614.26]}}, {"type": "Feature", "properties": {"id": "261614046001", "mag": 2.4, "time": 1507419370097, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73168513887266", "42.24967760501085", 7.5]}}, {"type": "Feature", "properties": {"id": "261614005005", "mag": 1.39, "time": 1507418785100, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73573636193973", "42.26767885000141", 6.37]}}, {"type": "Feature", "properties": {"id": "261614008001", "mag": 1.11, "time": 1507418426010, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.7387919224453", "42.2857193106287", 12.37]}}, {"type": "Feature", "properties": {"id": "261614023001", "mag": 1.5, "time": 1507417256497, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.6806388161999", "42.2835237915499", 10.8]}}, {"type": "Feature", "properties": {"id": "261614026001", "mag": 2.0, "time": 1507413903714, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.70849714229944", "42.29497165607419", 0.0]}}, {"type": "Feature", "properties": {"id": "261614074003", "mag": 1.5, "time": 1507413670029, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.58751301776994", "42.263773427038686", 96.8]}}, {"type": "Feature", "properties": {"id": "261614043003", "mag": 1.4, "time": 1507413587442, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75972714781511", "42.26067878534257", 0.0]}}, {"type": "Feature", "properties": {"id": "261614046002", "mag": 1.3, "time": 1507413266231, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72943356715774", "42.24084810122091", 54.3]}}, {"type": "Feature", "properties": {"id": "261614052001", "mag": 1.8, "time": 1507413195076, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72431564285668", "42.25869146056978", 50.0]}}, {"type": "Feature", "properties": {"id": "261614056001", "mag": 1.9, "time": 1507412827617, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72941218940201", "42.2334485663979", 93.6]}}, {"type": "Feature", "properties": {"id": "261614007002", "mag": 1.2, "time": 1507411925999, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75392215442545", "42.286943925355175", 69.1]}}, {"type": "Feature", "properties": {"id": "261614002002", "mag": 2.0, "time": 1507411814209, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72852470340571", "42.28493719945131", 14.8]}}, {"type": "Feature", "properties": {"id": "261614022001", "mag": 4.1, "time": 1507411448780, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72366717844129", "42.290970665071804", 54.36]}}, {"type": "Feature", "properties": {"id": "261614006001", "mag": 1.38, "time": 1507411214450, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75448490737513", "42.27754702712374", 4.14]}}, {"type": "Feature", "properties": {"id": "261614056002", "mag": 1.4, "time": 1507410206440, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.70613054419329", "42.232271067962806", -0.71]}}, {"type": "Feature", "properties": {"id": "261614054001", "mag": 1.34, "time": 1507408122250, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69508984398863", "42.253206244034324", 16.34]}}, {"type": "Feature", "properties": {"id": "261614033002", "mag": 1.0, "time": 1507407938100, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.78955046998124", "42.289105316208065", 5.16]}}, {"type": "Feature", "properties": {"id": "261614022004", "mag": 1.4, "time": 1507407100665, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72232033911341", "42.294957315685835", 150.4]}}, {"type": "Feature", "properties": {"id": "261614006002", "mag": 2.55, "time": 1507406278360, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75017679765485", "42.267106329243845", 2.15]}}, {"type": "Feature", "properties": {"id": "261614041002", "mag": 1.4, "time": 1507405129739, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.76565479253077", "42.272204171608195", 26.9]}}, {"type": "Feature", "properties": {"id": "261614032001", "mag": 1.7, "time": 1507403679922, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75112992504269", "42.295205556417834", 34.2]}}, {"type": "Feature", "properties": {"id": "261614044001", "mag": 1.04, "time": 1507401391710, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.76465544990913", "42.254648897533656", 18.27]}}, {"type": "Feature", "properties": {"id": "261614002004", "mag": 1.3, "time": 1507401212982, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73838528106937", "42.27658095284675", 0.0]}}, {"type": "Feature", "properties": {"id": "261614041004", "mag": 1.3, "time": 1507399350671, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.7622359739707", "42.26609305245877", 3.3]}}, {"type": "Feature", "properties": {"id": "261614053004", "mag": 4.6, "time": 1507398878400, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72079874368498", "42.264566619417636", 195.22]}}, {"type": "Feature", "properties": {"id": "261614005001", "mag": 1.6, "time": 1507398797233, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.7442724121709", "42.27608313444307", 0.0]}}, {"type": "Feature", "properties": {"id": "261614054003", "mag": 2.64, "time": 1507397278960, "felt": 4, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.68685828664424", "42.249907314992285", 7.72]}}, {"type": "Feature", "properties": {"id": "261614027001", "mag": 1.4, "time": 1507396778206, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.70022375952442", "42.30693564745707", 71.7]}}, {"type": "Feature", "properties": {"id": "261614027002", "mag": 1.2, "time": 1507396542471, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69833708672236", "42.31305145504279", 0.0]}}, {"type": "Feature", "properties": {"id": "261614025002", "mag": 4.3, "time": 1507395765330, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69027817721357", "42.295082291286796", 58.84]}}, {"type": "Feature", "properties": {"id": "261614044002", "mag": 1.91, "time": 1507395622730, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.76267229054938", "42.25211237993522", 5.38]}}, {"type": "Feature", "properties": {"id": "261614008003", "mag": 1.7, "time": 1507395602456, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73785602000116", "42.282396239188685", 0.0]}}, {"type": "Feature", "properties": {"id": "261614070001", "mag": 2.5, "time": 1507394741482, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.63300472309066", "42.29189112857142", 67.1]}}, {"type": "Feature", "properties": {"id": "261614055001", "mag": 1.6, "time": 1507394402896, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69474557546538", "42.24177255920633", 30.6]}}, {"type": "Feature", "properties": {"id": "261614003001", "mag": 1.5, "time": 1507393418705, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73245961955553", "42.274068386260545", 0.0]}}, {"type": "Feature", "properties": {"id": "261614038001", "mag": 1.6, "time": 1507392875390, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72871281611116", "42.309136848566524", 3.4]}}, {"type": "Feature", "properties": {"id": "261614021002", "mag": 1.3, "time": 1507392837463, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73390246087105", "42.28990664349555", 1.0]}}, {"type": "Feature", "properties": {"id": "261614052006", "mag": 2.3, "time": 1507392657193, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.70282128530117", "42.24846691560679", 4.3]}}, {"type": "Feature", "properties": {"id": "261614033003", "mag": 4.2, "time": 1507392435159, "felt": 2, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.79056639638968", "42.27905965209163", 14.9]}}, {"type": "Feature", "properties": {"id": "261614003003", "mag": 4.3, "time": 1507392287310, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72779946808177", "42.27622602748979", 69.65]}}, {"type": "Feature", "properties": {"id": "261614034001", "mag": 1.21, "time": 1507391530870, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.7771981228937", "42.288729936580225", 1.97]}}, {"type": "Feature", "properties": {"id": "261614004001", "mag": 1.95, "time": 1507390783500, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72943997960674", "42.26732515850162", 3.65]}}, {"type": "Feature", "properties": {"id": "261614004002", "mag": 1.02, "time": 1507388708760, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72821403660845", "42.26254073669262", 0.39]}}, {"type": "Feature", "properties": {"id": "261614005003", "mag": 1.9, "time": 1507385638408, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.74247521996098", "42.26820460795536", 0.9]}}, {"type": "Feature", "properties": {"id": "261614006003", "mag": 4.9, "time": 1507385606770, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75163204954326", "42.27182413752715", 10.0]}}, {"type": "Feature", "properties": {"id": "261614007003", "mag": 2.1, "time": 1507383291943, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75590989784031", "42.28340768748786", 85.2]}}, {"type": "Feature", "properties": {"id": "261614008002", "mag": 3.09, "time": 1507383200950, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.74172166114649", "42.28295816245566", 7.29]}}, {"type": "Feature", "properties": {"id": "261614021001", "mag": 1.07, "time": 1507382878240, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.74062516514206", "42.29605466149738", 2.09]}}, {"type": "Feature", "properties": {"id": "261614023002", "mag": 1.17, "time": 1507382428800, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69417455991908", "42.280377034146476", 4.39]}}, {"type": "Feature", "properties": {"id": "261614027003", "mag": 1.9, "time": 1507381096302, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69783561821102", "42.31698565304703", 75.2]}}, {"type": "Feature", "properties": {"id": "261614032002", "mag": 1.6, "time": 1507378828395, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.761874234646", "42.29232535995638", 14.8]}}, {"type": "Feature", "properties": {"id": "261614036002", "mag": 1.98, "time": 1507378497820, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71059299119715", "42.30892829889424", 34.62]}}, {"type": "Feature", "properties": {"id": "261614036003", "mag": 1.5, "time": 1507378014192, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71614729946013", "42.31752875253209", 0.0]}}, {"type": "Feature", "properties": {"id": "261614031001", "mag": 1.39, "time": 1507377675100, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.76742481093304", "42.30775642693316", 2.24]}}, {"type": "Feature", "properties": {"id": "261614043002", "mag": 2.66, "time": 1507377140600, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.77277864066042", "42.25897408267364", 4.3]}}, {"type": "Feature", "properties": {"id": "261614045002", "mag": 1.9, "time": 1507376759252, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75354073758179", "42.248564638625595", 0.0]}}, {"type": "Feature", "properties": {"id": "261614045003", "mag": 2.1, "time": 1507376626801, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.74936647156797", "42.24139639403716", 0.0]}}, {"type": "Feature", "properties": {"id": "261614046004", "mag": 4.1, "time": 1507372645200, "felt": 103, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73030482823798", "42.25499099208843", 23.29]}}, {"type": "Feature", "properties": {"id": "261614052003", "mag": 1.3, "time": 1507370926907, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71313111184422", "42.25789802642796", 7.8]}}, {"type": "Feature", "properties": {"id": "261614052004", "mag": 1.5, "time": 1507369548317, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71748701570989", "42.250155257832816", 0.0]}}, {"type": "Feature", "properties": {"id": "261614053002", "mag": 1.4, "time": 1507369466929, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69220872491988", "42.264915948491605", 82.0]}}, {"type": "Feature", "properties": {"id": "261614053005", "mag": 1.22, "time": 1507368529650, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71450237516967", "42.277875662313136", 1.16]}}, {"type": "Feature", "properties": {"id": "261614053003", "mag": 5.1, "time": 1507368374110, "felt": 13, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.70959594257914", "42.266459017754386", 147.34]}}, {"type": "Feature", "properties": {"id": "261614076001", "mag": 2.1, "time": 1507366872675, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.59451278917109", "42.269587232981706", 88.4]}}, {"type": "Feature", "properties": {"id": "261614034002", "mag": 1.8, "time": 1507366536698, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.76523790715541", "42.28600681674987", 11.3]}}, {"type": "Feature", "properties": {"id": "261614022003", "mag": 4.9, "time": 1507365487800, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71278008311496", "42.28204040705444", 10.0]}}, {"type": "Feature", "properties": {"id": "261614002003", "mag": 2.2, "time": 1507364931625, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73813597684722", "42.27369175591899", 0.0]}}, {"type": "Feature", "properties": {"id": "261614060001", "mag": 1.0, "time": 1507363084310, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.72662737556094", "42.3308993428163", 35.76]}}, {"type": "Feature", "properties": {"id": "261614038002", "mag": 1.72, "time": 1507362853030, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73851833782268", "42.3093747034315", 34.41]}}, {"type": "Feature", "properties": {"id": "261614052002", "mag": 1.8, "time": 1507362228460, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71918049935954", "42.256357890510806", 5.8]}}, {"type": "Feature", "properties": {"id": "261614035001", "mag": 1.0, "time": 1507362158010, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.77100817523521", "42.28008640464918", 2.73]}}, {"type": "Feature", "properties": {"id": "261614025001", "mag": 1.03, "time": 1507361004730, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.6877937141535", "42.296106278598444", 9.91]}}, {"type": "Feature", "properties": {"id": "261614055002", "mag": 1.19, "time": 1507358854330, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.6905801764471", "42.23538855290311", 1.65]}}, {"type": "Feature", "properties": {"id": "261614074002", "mag": 1.0, "time": 1507358249243, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.57748189778934", "42.26524888956436", 11.4]}}, {"type": "Feature", "properties": {"id": "261614002001", "mag": 1.89, "time": 1507358144340, "felt": 2, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.734821934973", "42.27993747622203", 4.21]}}, {"type": "Feature", "properties": {"id": "261614056003", "mag": 4.5, "time": 1507357181260, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71523709056483", "42.23402566972171", 156.49]}}, {"type": "Feature", "properties": {"id": "261614074001", "mag": 2.4, "time": 1507353902490, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.56114698327015", "42.27004493346919", 14.1]}}, {"type": "Feature", "properties": {"id": "261614001001", "mag": 1.77, "time": 1507352706600, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.74611946747106", "42.28009136140515", 6.31]}}, {"type": "Feature", "properties": {"id": "261614045001", "mag": 1.4, "time": 1507351430424, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.74490620725864", "42.253776772102306", 0.0]}}, {"type": "Feature", "properties": {"id": "261614033001", "mag": 1.8, "time": 1507351047849, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.78341050795342", "42.29343990961765", 0.0]}}, {"type": "Feature", "properties": {"id": "261614053001", "mag": 1.77, "time": 1507350586140, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71794568313287", "42.271643009065855", 1.77]}}, {"type": "Feature", "properties": {"id": "261614060002", "mag": 1.46, "time": 1507350177430, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.6722233417535", "42.29576263332384", 10.71]}}, {"type": "Feature", "properties": {"id": "261614007001", "mag": 4.7, "time": 1507347862040, "felt": 1, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.74647372646797", "42.28631670019026", 178.13]}}, {"type": "Feature", "properties": {"id": "261614022002", "mag": 1.48, "time": 1507346675870, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.7157651015611", "42.29375922348057", 2.53]}}, {"type": "Feature", "properties": {"id": "261614026002", "mag": 1.08, "time": 1507345321240, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.69830125376019", "42.295711625131986", 11.43]}}, {"type": "Feature", "properties": {"id": "261614042002", "mag": 1.46, "time": 1507345267910, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.78137881877895", "42.266297731467176", 4.04]}}, {"type": "Feature", "properties": {"id": "261614042001", "mag": 2.12, "time": 1507344823940, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.7768432571919", "42.27049767651807", 5.34]}}, {"type": "Feature", "properties": {"id": "261614003002", "mag": 2.3, "time": 1507344587124, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73439818831238", "42.27150198979363", 31.7]}}, {"type": "Feature", "properties": {"id": "261614046003", "mag": 1.1, "time": 1507344387447, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.7345837009617", "42.25959306776017", 0.5]}}, {"type": "Feature", "properties": {"id": "261614005004", "mag": 1.27, "time": 1507344302520, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73845300297984", "42.26948621095294", 4.02]}}, {"type": "Feature", "properties": {"id": "261614052005", "mag": 4.9, "time": 1507343887900, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.70780489644058", "42.252164930236155", 10.0]}}, {"type": "Feature", "properties": {"id": "261614004003", "mag": 1.94, "time": 1507341324260, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.73644027484079", "42.26343936109681", 6.01]}}, {"type": "Feature", "properties": {"id": "261614041001", "mag": 5.0, "time": 1507340745260, "felt": null, "tsunami": 1}, "geometry": {"type": "Point", "coordinates": ["-83.76071991000236", "42.27394217966016", 7.01]}}, {"type": "Feature", "properties": {"id": "261614006004", "mag": 1.46, "time": 1507340726000, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.75554405202064", "42.27101289539308", 5.78]}}, {"type": "Feature", "properties": {"id": "261614021003", "mag": 1.7, "time": 1507339655320, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.7347624435782", "42.29499488425111", 0.0]}}, {"type": "Feature", "properties": {"id": "261614036001", "mag": 1.6, "time": 1507339653625, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71833577786829", "42.302934119225974", 10.5]}}, {"type": "Feature", "properties": {"id": "261614051002", "mag": 1.7, "time": 1507338343941, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.70671509126451", "42.239409812658046", 50.8]}}, {"type": "Feature", "properties": {"id": "261614051001", "mag": 2.1, "time": 1507336466527, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.71511857952834", "42.24319617355423", 88.2]}}, {"type": "Feature", "properties": {"id": "261614070002", "mag": 1.56, "time": 1507336119080, "felt": null, "tsunami": 0}, "geometry": {"type": "Point", "coordinates": ["-83.58845506517707", "42.31770511280546", 2.89]}}]};

            map.on('load', function() {
                // Add a geojson point source.
                // Heatmap layers also work with a vector tile source.
                map.addSource('demands', {
                    "type": "geojson",
                    "data": geojson
                });

                map.addLayer({
                    "id": "demands-heat",
                    "type": "heatmap",
                    "source": "demands",
                    "maxzoom": 9,
                    "paint": {
                        // Increase the heatmap weight based on frequency and property magnitude
                        "heatmap-weight": [
                            1, 0,
                            62, 1
                        ],
                        // Increase the heatmap color weight weight by zoom level
                        // heatmap-intensity is a multiplier on top of heatmap-weight
                        "heatmap-intensity": [
                            11, 1,
                            15, 3
                        ],
                        // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).
                        // Begin color ramp at 0-stop with a 0-transparancy color
                        // to create a blur-like effect.
                        "heatmap-color": [
                            "interpolate",
                            ["linear"],
                            ["heatmap-density"],
                            0, "rgba(33,102,172,0)",
                            0.2, "rgb(103,169,207)",
                            0.4, "rgb(209,229,240)",
                            0.6, "rgb(253,219,199)",
                            0.8, "rgb(239,138,98)",
                            1, "rgb(178,24,43)"
                        ],
                        // Adjust the heatmap radius by zoom level
                        "heatmap-radius": [
                            11, 15,
                            15, 20
                        ],
                        // Transition from heatmap to circle layer by zoom level
                        "heatmap-opacity": [
                            14, 1,
                            15, 0
                        ],
                    }
                }, 'waterway-label');

                map.addLayer({
                    "id": "demands-point",
                    "type": "circle",
                    "source": "demands",
                    "minzoom": 7,
                    "paint": {
                        "circle-radius": [
                            "interpolate",
                            ["linear"],
                            ["zoom"],
                            14, [
                                "interpolate",
                                ["linear"],
                                ["get", "mag"],
                                1, 1,
                                6, 4
                            ],
                            16, [
                                "interpolate",
                                ["linear"],
                                ["get", "mag"],
                                1, 5,
                                6, 50
                            ]
                        ],
                        "circle-color": [
                            "interpolate",
                            ["linear"],
                            ["get", "mag"],
                            1, "rgba(33,102,172,0)",
                            2, "rgb(103,169,207)",
                            3, "rgb(209,229,240)",
                            4, "rgb(253,219,199)",
                            5, "rgb(239,138,98)",
                            6, "rgb(178,24,43)"
                        ],
                        "circle-stroke-color": "white",
                        "circle-stroke-width": 1,
                        // Transition from heatmap to circle layer by zoom level
                        "circle-opacity": [
                            "interpolate",
                            ["linear"],
                            ["zoom"],
                            7, 0,
                            8, 1
                        ]
                    }
                }, 'waterway-label');
            });
            </script>
          <br/>
          <h2>Statistics</h2>
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Demand Index</th>
                  <th>Latitute</th>
                  <th>Longtitute</th>
                </tr>
              </thead>
              <tbody>
                {% for feature in demand_data["features"] %}
                <tr>
                  <td>{{ feature["properties"]["id"] }}</td>
                  <td>{{ feature["properties"]["mag"] }}</td>
                  <td>{{ feature["geometry"]["coordinates"][1] }}</td>
                  <td>{{ feature["geometry"]["coordinates"][0] }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </main>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>



<!-- <!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <title>deck.gl HexagonLayer demo</title>


  <link rel='stylesheet prefetch' href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css'>

      <link rel="stylesheet" href="static/css/style.css">


</head>

  <body>
  <div id="control-panel">
    <div>
      <label>Radius</label>
      <input id="radius" type="range" min="1000" max="20000" step="1000" value="1000"></input>
      <span id="radius-value"></span>
    </div>
    <div>
      <label>Coverage</label>
      <input id="coverage" type="range" min="0" max="1" step="0.1" value="1"></input>
      <span id="coverage-value"></span>
    </div>
    <div>
      <label>Upper Percentile</label>
      <input id="upperPercentile" type="range" min="90" max="100" step="1" value="100"></input>
      <span id="upperPercentile-value"></span>
    </div>
  </div>

    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js'></script>
    <script src='https://unpkg.com/deck.gl@~5.2.0/deckgl.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js'></script>
    <script  src="static/js/index.js"></script>

  </body>
</html> -->
